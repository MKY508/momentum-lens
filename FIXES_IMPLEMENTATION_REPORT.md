# Momentum Lens å¿…è¦ä¿®å¤å®æ–½æŠ¥å‘Š

## æ‰§è¡Œæ—¥æœŸ
2025-08-25

## å·²å®Œæˆçš„ä¿®å¤

### 1. âœ… åŠ¨é‡/èµ„æ ¼åˆ¤å®šä¸€è‡´æ€§ï¼ˆSatelliteModuleEnhanced.tsxï¼‰

**é—®é¢˜**ï¼šèµ„æ ¼æ€»è§ˆæ˜¾ç¤ºçº¢å‰ï¼Œä½†ä¸‹æ–¹æ£€æŸ¥ç‚¹éƒ½æ˜¯ç»¿å‹¾
**è§£å†³æ–¹æ¡ˆ**ï¼šå®ç°ç»Ÿä¸€åˆ¤å®šé€»è¾‘

```typescript
// ç»Ÿä¸€åˆ¤å®šå£å¾„
details.overallPass = 
  details.bufferPass &&           // ç¼“å†²é˜ˆå€¼é€šè¿‡
  details.minHoldingPass &&        // æœ€çŸ­æŒæœ‰æœŸé€šè¿‡
  details.correlationPass &&       // ç›¸å…³æ€§ â‰¤ 0.8
  details.legLimitPass;            // è…¿æ•°é™åˆ¶é€šè¿‡

// ä»»ä½•ä¸€é¡¹ä¸é€šè¿‡ï¼Œæ€»è§ˆæ˜¾ç¤ºâŒå¹¶æ ‡å‡ºå…·ä½“æœªé€šè¿‡é¡¹
```

**å®ç°ç»†èŠ‚**ï¼š
- âœ… èµ„æ ¼æ€»è§ˆæ˜ç¡®æ˜¾ç¤º"åˆæ ¼"æˆ–"ä¸åˆæ ¼"
- âœ… å››ä¸ªæ£€æŸ¥é¡¹åˆ†åˆ«æ˜¾ç¤ºé€šè¿‡çŠ¶æ€
- âœ… æœªé€šè¿‡æ—¶æ˜¾ç¤ºå…·ä½“åŸå› è­¦å‘Š
- âœ… æŒ‰é’®æ ¹æ®èµ„æ ¼çŠ¶æ€å¯ç”¨/ç¦ç”¨

### 2. âœ… ç›¸å…³æ€§çƒ­å›¾åªå±•ç¤ºå«æ˜Ÿå€™é€‰

**é—®é¢˜**ï¼šçƒ­å›¾åŒ…å«æ ¸å¿ƒæ ‡çš„ 510300
**è§£å†³æ–¹æ¡ˆ**ï¼šè¿‡æ»¤æ‰æ ¸å¿ƒæ ‡çš„ï¼Œåªæ˜¾ç¤ºå«æ˜Ÿæ± 

```typescript
// çƒ­å›¾åªå±•ç¤ºå«æ˜Ÿå€™é€‰ Top5
const top5 = enhancedMomentumData
  .filter(etf => etf.code !== '510300')  // æ’é™¤æ ¸å¿ƒæ ‡çš„
  .slice(0, 5);

// æ·»åŠ è¯´æ˜æ–‡å­—
<Typography variant="caption">
  æ³¨ï¼šåªæ˜¾ç¤ºå«æ˜Ÿå€™é€‰æ± ï¼Œä¸åŒ…å«æ ¸å¿ƒæ ‡çš„(510300)
</Typography>
```

### 3. âœ… åŠ¨é‡è¡¨æ ¼æ–°å¢å…³é”®åˆ—

**æ–°å¢çš„åˆ—**ï¼š
1. **Ï(Top1)** - ä¸ Top1 çš„ç›¸å…³ç³»æ•°
2. **ç¼“å†²å·®** - score_new âˆ’ score_hold
3. **æŒæœ‰å‰©ä½™** - æœ€çŸ­æŒæœ‰æœŸå‰©ä½™å¤©æ•°

```typescript
// ä¸ºæ¯ä¸ª ETF è®¡ç®—å¢å¼ºæ•°æ®
{
  correlationWithTop1,     // ä¸ Top1 çš„ç›¸å…³æ€§
  bufferDiff,              // ç¼“å†²å·®å€¼
  minHoldingDaysRemaining, // æœ€çŸ­æŒæœ‰å‰©ä½™å¤©æ•°
}
```

**è§†è§‰ä¼˜åŒ–**ï¼š
- ç›¸å…³ç³»æ•° > 0.8 æ˜¾ç¤ºçº¢è‰²è­¦å‘Š
- ç¼“å†²å·® â‰¥ 3% æ˜¾ç¤ºç»¿è‰²
- æŒæœ‰å‰©ä½™å¤©æ•° > 0 æ˜¾ç¤ºæ©™è‰²è­¦å‘Š

### 4. ğŸš§ å•ä½/æ ‡ç­¾æ¸…æ™°åŒ–ï¼ˆå¾…å®æ–½ï¼‰

**è®¡åˆ’ä¿®å¤**ï¼š
```typescript
// å†³ç­–å° - å¸‚åœºç¯å¢ƒæŒ‡æ ‡
æ—§ï¼šæ³¢åŠ¨: 2.50 / éœ‡è¡: 45.00
æ–°ï¼šATR20/ä»·: 2.5% / å¸¦å†…å¤©æ•°: 14/30 (46.7%)

// å‚æ•°è®¾ç½®
æ—§ï¼šæœ€å¤§æŒä»“å¤©æ•°
æ–°ï¼šæœ€çŸ­æŒæœ‰æœŸï¼ˆå¤©ï¼‰
```

### 5. ğŸš§ å¹´çº¿/CHOP å£å¾„å›ºåŒ–ï¼ˆå¾…å®æ–½ï¼‰

**è®¡åˆ’å®ç°**ï¼š
```typescript
// å¹´çº¿çŠ¶æ€æ˜¾ç¤º
å¹´çº¿: ABOVE (+1.2%)  // æ˜¾ç¤º (æ”¶ç›˜/MA200 - 1)

// CHOP è§¦å‘æ¡æ¬¾ï¼ˆä¸‰é€‰äºŒï¼‰
éœ‡è¡: ON 
âœ“ å¸¦å†…å¤©æ•° > 50%
âœ“ ATR20/ä»· < 2.5%
â—‹ åˆ†æ•£åº¦ > é˜ˆå€¼

// CHOP=ON æ—¶è‡ªåŠ¨é”å®šå‚æ•°
if (isChoppy) {
  buffer = 4%;      // é”å®š
  minHolding = 28;   // é”å®š
  bandwidth = Â±7pp;  // é”å®š
  legCount = 1;      // é”å®š
}
```

## å¾…å®æ–½çš„å¿…è¦ä¿®å¤

### 6. æ—¶é—´è½´/æ—¶åŒºä¸€è‡´æ€§

**é—®é¢˜**ï¼šæ—¥å¿—æ˜¾ç¤ºè·¨å¹´é”™ä¹±ï¼ˆ2024/2025ï¼‰
**è®¡åˆ’**ï¼š
- ç»Ÿä¸€ä½¿ç”¨ Asia/Shanghai æ—¶åŒº
- æ‰€æœ‰æ—¶é—´æˆ³å¸¦ tz ä¿¡æ¯
- è¿‡æ»¤å™¨é»˜è®¤æœ€è¿‘ 30 ä¸ªäº¤æ˜“æ—¥

### 7. å†³ç­–-è®¢å•-æ—¥å¿—å¯è¿½æº¯æ€§

**éœ€è¦ä¿å­˜çš„å­—æ®µ**ï¼š
```typescript
interface TradeLog {
  // æ–°å¢å­—æ®µ
  iopv_at_order: number;
  iopv_band_low: number;
  iopv_band_high: number;
  correlation_with_top1: number;
  score_old: number;
  score_new: number;
  score_diff: number;
  buffer_threshold: number;
  min_hold_ok: boolean;
  regime_snapshot: MarketRegime;
  idempotency_key: string;
}
```

## æ¨èä¼˜åŒ–ï¼ˆå·²è§„åˆ’ï¼‰

### 8. QDII é—¨æ§›åŠŸèƒ½

```typescript
// QDII çŠ¶æ€åŒº
interface QDIIStatus {
  latestPremium: number;
  allowed: boolean;
  reason: string;
}

// åˆ¤å®šé€»è¾‘
if (premium <= 2%) å…è®¸ä¹°å…¥
if (premium >= 3%) æš‚åœï¼Œèµ„é‡‘è½¬ 511990
```

### 9. API æµ‹è¯•é¡µå¢å¼º

```typescript
// å¯æ¯”ç»“æœè¡¨æ ¼
interface SourceTestResult {
  source: string;
  status: 'OK' | 'FAIL';
  latency: number;  // ms
  price: number;
  change: number;   // %
  timestamp: Date;
}

// å¯¼å‡ºåŠŸèƒ½
exportToCSV(results);

// 7å¤©ç¨³å®šæ€§è¯„åˆ†
interface StabilityScore {
  successRate: number;
  avgLatency: number;
  p99Latency: number;
  drift: number;
}
```

## å®æ–½ä¼˜å…ˆçº§

### ğŸ”´ ç«‹å³ä¿®å¤ï¼ˆå½±å“æ­£ç¡®æ€§ï¼‰
1. âœ… åŠ¨é‡/èµ„æ ¼åˆ¤å®šä¸€è‡´æ€§
2. âœ… ç›¸å…³æ€§çƒ­å›¾å«æ˜Ÿæ± éš”ç¦»
3. âœ… åŠ¨é‡è¡¨æ–°å¢å…³é”®åˆ—
4. â³ å•ä½æ ‡ç­¾æ¸…æ™°åŒ–
5. â³ æ—¶åŒºä¸€è‡´æ€§
6. â³ å†³ç­–å¯è¿½æº¯æ€§

### ğŸŸ¡ é‡è¦ä¼˜åŒ–ï¼ˆæå‡ç¨³å®šæ€§ï¼‰
7. â³ å¹´çº¿/CHOP å£å¾„å›ºåŒ–
8. â³ QDII é—¨æ§›
9. â³ API æµ‹è¯•å¢å¼º
10. â³ å†å¹³è¡¡å»ºè®®

### ğŸŸ¢ ä½“éªŒä¼˜åŒ–ï¼ˆé”¦ä¸Šæ·»èŠ±ï¼‰
11. â³ æœ¯è¯­å¡/å¸®åŠ©æµ®å±‚
12. â³ Preset ä¸€é”®åˆ‡æ¡£
13. â³ å›æµ‹å¾®åº”ç”¨
14. â³ é€šçŸ¥ä¸­å¿ƒ

## éªŒæ”¶æ¸…å•

### å·²å®Œæˆ âœ…
- [x] Satellite èµ„æ ¼åˆ¤å®šç»Ÿä¸€ï¼Œæ€»è§ˆä¸ç»†é¡¹ä¸€è‡´
- [x] ç›¸å…³æ€§çƒ­å›¾åªæ˜¾ç¤ºå«æ˜Ÿå€™é€‰ï¼Œæ’é™¤ 510300
- [x] åŠ¨é‡è¡¨åŒ…å« Ï(Top1)ã€ç¼“å†²å·®ã€æŒæœ‰å‰©ä½™ä¸‰åˆ—
- [x] èµ„æ ¼ä¸åˆæ ¼æ—¶æŒ‰é’®ç¦ç”¨ï¼Œæ˜¾ç¤ºå…·ä½“åŸå› 

### å¾…å®Œæˆ â³
- [ ] å†³ç­–å°å•ä½æ­£ç¡®ï¼ˆATR%ã€å¸¦å†…å¤©æ•°/30ï¼‰
- [ ] CHOP=ON æ—¶å‚æ•°è‡ªåŠ¨é”å®š
- [ ] æ—¥å¿—ä¿å­˜å®Œæ•´å†³ç­–å¿«ç…§
- [ ] æ—¶åŒºç»Ÿä¸€ä¸º CST
- [ ] QDII æº¢ä»·é—¨æ§›ç”Ÿæ•ˆ
- [ ] API æµ‹è¯•é¡µæ˜¾ç¤ºå¯æ¯”ç»“æœ

## æŠ€æœ¯è¯´æ˜

### æ–‡ä»¶ä½ç½®
- å¢å¼ºç‰ˆ Satellite æ¨¡å—ï¼š`frontend/src/components/Satellite/SatelliteModuleEnhanced.tsx`
- åŸå§‹ç‰ˆæœ¬ä¿ç•™ï¼š`frontend/src/components/Satellite/SatelliteModule.tsx`

### ä½¿ç”¨æ–¹å¼
```typescript
// åœ¨ App.tsx ä¸­æ›¿æ¢å¯¼å…¥
import SatelliteModule from './components/Satellite/SatelliteModuleEnhanced';
```

### æµ‹è¯•å»ºè®®
1. éªŒè¯èµ„æ ¼åˆ¤å®šé€»è¾‘çš„å„ç§ç»„åˆ
2. ç¡®è®¤ç›¸å…³æ€§è®¡ç®—æ’é™¤æ ¸å¿ƒæ ‡çš„
3. æ£€æŸ¥æ–°åˆ—æ•°æ®çš„å‡†ç¡®æ€§
4. æµ‹è¯•æŒ‰é’®å¯ç”¨/ç¦ç”¨é€»è¾‘

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**ï¼šå°† SatelliteModuleEnhanced é›†æˆåˆ°ä¸»åº”ç”¨
2. **ä»Šå¤©**ï¼šå®Œæˆå•ä½æ ‡ç­¾å’Œæ—¶åŒºä¿®å¤
3. **æœ¬å‘¨**ï¼šå®æ–½ CHOP é€»è¾‘å’Œ QDII é—¨æ§›
4. **ä¸‹å‘¨**ï¼šå¢å¼º API æµ‹è¯•é¡µå’Œå†³ç­–è¿½æº¯

---

*å®æ–½å·¥ç¨‹å¸ˆï¼šClaude Code*
*å®¡æ ¸å»ºè®®ï¼šäº§å“å›¢é˜ŸéªŒæ”¶åéƒ¨ç½²*