# ETFåŠ¨é‡æ ¸å¿ƒå«æ˜Ÿç­–ç•¥ç³»ç»Ÿ V2

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

åŸºäºStreamlit + Backtrader + AkShareçš„è½»é‡çº§ETFåŠ¨é‡ç­–ç•¥ç³»ç»Ÿï¼Œå®ç°æ ¸å¿ƒå«æ˜Ÿé…ç½®ã€åŠ¨é‡é€‰è‚¡ã€å¯è½¬å€ºç½‘æ ¼å’ŒåŠè‡ªåŠ¨ä¸‹å•ã€‚

### æ ¸å¿ƒç‰¹æ€§
- âœ… **æç®€æ¶æ„**: ä»…5ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼Œä»£ç é‡å‡å°‘60%
- âœ… **å®æ—¶æ•°æ®**: AkShareè·å–Aè‚¡ETF/å¯è½¬å€ºå®æ—¶æ•°æ®
- âœ… **æ™ºèƒ½å†³ç­–**: åŒçª—åŠ¨é‡æ‰“åˆ† + ç›¸å…³æ€§ç­›é™¤ + èµ„æ ¼æ£€æŸ¥
- âœ… **åŠè‡ªåŠ¨äº¤æ˜“**: ç”Ÿæˆæ¡ä»¶å•è„šæœ¬ï¼Œæ”¯æŒeasytraderæ‰¹é‡ä¸‹å•
- âœ… **ä¸€é”®éƒ¨ç½²**: å•å‘½ä»¤å¯åŠ¨ï¼Œæ— éœ€å¤æ‚é…ç½®

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…å¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®
cd projecttest2

# ä¸€é”®å¯åŠ¨
chmod +x start.sh
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
streamlit run app.py
```

### 2. è®¿é—®ç³»ç»Ÿ
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://127.0.0.1:8501

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
projecttest2/
â”œâ”€â”€ app.py              # Streamlit UIä¸»ç•Œé¢
â”œâ”€â”€ data_adapter.py     # æ•°æ®é€‚é…å±‚(AkShare)
â”œâ”€â”€ indicators.py       # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”œâ”€â”€ decision_engine.py  # å†³ç­–å¼•æ“
â”œâ”€â”€ trading_helper.py   # åŠè‡ªåŠ¨äº¤æ˜“åŠ©æ‰‹
â”œâ”€â”€ config.yaml        # ç­–ç•¥é…ç½®
â””â”€â”€ requirements.txt   # ä¾èµ–åŒ…
```

## ğŸ“Š ç­–ç•¥é€»è¾‘

### 1. èµ„äº§é…ç½®
- **Core (40%)**: æ²ªæ·±300ã€ä¸Šè¯50ã€çº¢åˆ©ETFã€é»„é‡‘ETF
- **Satellite (30%)**: åŠ¨é‡Top2 ETFï¼ˆç›¸å…³æ€§<0.8ï¼‰
- **å¯è½¬å€º (10%)**: è§„æ¨¡>3äº¿ã€æº¢ä»·<30%ã€è¯„çº§AA-ä»¥ä¸Š
- **ç°é‡‘ (20%)**: åå®æ·»ç›Šæˆ–åœºå†…è´§åŸº

### 2. åŠ¨é‡è®¡ç®—
```python
åŠ¨é‡å¾—åˆ† = r60 * 0.6 + r120 * 0.4
å…¶ä¸­ï¼š
- r60: 3ä¸ªæœˆæ”¶ç›Šç‡
- r120: 6ä¸ªæœˆæ”¶ç›Šç‡
```

### 3. èµ„æ ¼æ£€æŸ¥
- æˆäº¤é¢ > 5000ä¸‡
- MA200çŠ¶æ€: éè·Œç ´
- ç›¸å…³ç³»æ•° < 0.8
- æœ€çŸ­æŒæœ‰ 14å¤©
- ç¼“å†²åŒº 3%

### 4. é£æ§è§„åˆ™
- é»˜è®¤æ­¢æŸ: -12%
- éœ‡è¡å¸‚æ­¢æŸ: -15%
- è¶‹åŠ¿å¸‚æ­¢æŸ: -10%

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### å†³ç­–é¢æ¿
1. ç³»ç»Ÿè‡ªåŠ¨åˆ¤æ–­å¸‚åœºçŠ¶æ€ï¼ˆç‰›/ç†Š/éœ‡è¡ï¼‰
2. æ ¹æ®å¸‚åœºçŠ¶æ€è°ƒæ•´Coreé…ç½®
3. é€‰æ‹©åŠ¨é‡æœ€å¼ºçš„2åªETFä½œä¸ºå«æ˜Ÿ
4. ç­›é€‰è¯„åˆ†æœ€é«˜çš„3åªå¯è½¬å€º

### è®¢å•ç”Ÿæˆ
1. è®¾ç½®æ€»èµ„é‡‘
2. é€‰æ‹©äº¤æ˜“æ—¶é—´ï¼ˆå‘¨äºŒ10:30/14:00ï¼‰
3. ç”ŸæˆCSVè®¢å•æ–‡ä»¶
4. å¯¼å‡ºeasytraderè„šæœ¬

### åŠè‡ªåŠ¨äº¤æ˜“
```python
# ç”Ÿæˆçš„è„šæœ¬ç¤ºä¾‹
import easytrader
user = easytrader.use('ht')  # åæ³°
user.prepare('config.json')

for order in orders:
    user.buy(order['ä»£ç '], amount=order['é‡‘é¢'])
```

## ğŸ”§ é…ç½®è¯´æ˜

ç¼–è¾‘ `config.yaml` è°ƒæ•´ç­–ç•¥å‚æ•°ï¼š

```yaml
strategy:
  core_ratio: 0.4        # Coreæ¯”ä¾‹
  satellite_ratio: 0.3   # å«æ˜Ÿæ¯”ä¾‹
  momentum:
    r60_weight: 0.6      # 3æœˆåŠ¨é‡æƒé‡
    r120_weight: 0.4     # 6æœˆåŠ¨é‡æƒé‡
```

## ğŸ“ˆ å›æµ‹åŠŸèƒ½ï¼ˆå¼€å‘ä¸­ï¼‰

- Backtraderé›†æˆ
- å†å²å›æµ‹åˆ†æ
- æ”¶ç›Šæ›²çº¿å±•ç¤º
- é£é™©æŒ‡æ ‡è®¡ç®—

## âš ï¸ é£é™©æç¤º

1. æœ¬ç³»ç»Ÿä»…ä¾›ç ”ç©¶å­¦ä¹ ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
2. å®ç›˜äº¤æ˜“å‰è¯·å……åˆ†æµ‹è¯•
3. æ³¨æ„æ•°æ®å»¶è¿Ÿï¼ˆå…è´¹æ¥å£çº¦15åˆ†é’Ÿï¼‰
4. å®šæœŸæ£€æŸ¥ç­–ç•¥æœ‰æ•ˆæ€§

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Streamlit 1.29
- **æ•°æ®**: AkShare 1.11
- **å›æµ‹**: Backtrader 1.9
- **äº¤æ˜“**: easytrader 1.12
- **å¯è§†åŒ–**: Plotly 5.18

## ğŸ“ æ›´æ–°æ—¥å¿—

### V2.0 (2024-08)
- é‡æ„ä¸ºStreamlitå•é¡µåº”ç”¨
- ç®€åŒ–ä¸º5ä¸ªæ ¸å¿ƒæ–‡ä»¶
- é›†æˆåŠè‡ªåŠ¨äº¤æ˜“åŠŸèƒ½
- ä¼˜åŒ–åŠ¨é‡è®¡ç®—é€»è¾‘

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPRï¼

## ğŸ“„ License

MIT License