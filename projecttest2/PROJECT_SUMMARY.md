# ETF动量策略系统 ProjectTest2 - 项目总结

## ✅ 已完成功能

### 1. 系统架构（极简版）
- **仅5个核心文件**，代码量减少60%
- **Streamlit单页应用**，无需前后端分离
- **即时启动**，无需Docker或复杂配置

### 2. 数据层 (data_adapter.py)
- ✅ AkShare实时数据接入
- ✅ ETF列表获取（1200+只）
- ✅ 历史K线数据
- ✅ 沪深300指数状态
- ✅ 可转债数据（模拟）
- ✅ 相关性计算
- ✅ 缓存机制

### 3. 指标层 (indicators.py)
- ✅ MA200均线
- ✅ ATR20波动率
- ✅ CHOP震荡指标
- ✅ 动量计算（r60/r120）
- ✅ RSI/布林带
- ✅ 夏普比率
- ✅ 最大回撤

### 4. 决策引擎 (decision_engine.py)
- ✅ 市场状态判断（牛/熊/震荡）
- ✅ 动量评分系统
- ✅ Top N选择 + 相关性筛除
- ✅ 资格检查（成交额/MA200）
- ✅ Core/Satellite/CB配置
- ✅ 动态止损设置
- ✅ 缓冲区检查

### 5. UI界面 (app.py)
- ✅ 决策面板（实时信号）
- ✅ 动量排名表
- ✅ 可转债筛选
- ✅ 订单生成器
- ✅ 参数设置页
- ✅ 资产配置饼图
- ✅ CSV导出功能

### 6. 半自动交易 (trading_helper.py)
- ✅ 条件单生成
- ✅ IOPV限价带
- ✅ 网格订单
- ✅ easytrader脚本生成
- ✅ 周二定投计划
- ✅ 订单验证

## 🚀 快速使用

### 启动系统
```bash
cd projecttest2
source venv/bin/activate
streamlit run app.py
```

访问: http://127.0.0.1:8501

### 核心操作流程
1. **查看决策面板** → 获取今日配置建议
2. **检查动量排名** → 确认卫星ETF选择
3. **生成订单** → 设置资金，导出CSV
4. **半自动交易** → 运行生成的Python脚本

## 📊 策略要点

### 资产配置
```
市场状态判断 → Core调整 → Satellite选择 → CB筛选
     ↓            ↓            ↓             ↓
  MA200比率    防守/进攻    动量Top2      评分Top3
```

### 风控机制
- **止损线**: -12%（默认）/-15%（震荡）/-10%（趋势）
- **缓冲区**: 3%避免频繁调仓
- **最短持有**: 14天防止追涨杀跌
- **相关性**: <0.8避免同质化

## 💡 优势对比

| 特性 | ProjectTest1 | ProjectTest2 |
|-----|-------------|-------------|
| 代码量 | 3000+行 | 1200行 |
| 文件数 | 20+ | 5个核心 |
| 启动时间 | 需配置Docker | 30秒 |
| 技术栈 | React+FastAPI | Streamlit |
| 数据源 | 需要配置 | AkShare即用 |
| 部署难度 | 复杂 | 极简 |

## 🔧 待优化项

1. **数据源增强**
   - 接入实时IOPV数据
   - 可转债真实数据
   - Level2行情（付费）

2. **回测功能**
   - 集成Backtrader回测
   - 历史业绩展示
   - 参数优化

3. **交易对接**
   - 券商API直连
   - 实盘监控
   - 风险预警

## 📝 使用建议

1. **每周二执行**：10:30上午场，14:00下午场
2. **资金管理**：建议10万起步，分批建仓
3. **参数调优**：根据市场环境调整动量权重
4. **风险控制**：严格执行止损，不要情绪化

## ⚠️ 免责声明

- 本系统仅供学习研究使用
- 不构成任何投资建议
- 实盘交易风险自负
- 历史业绩不代表未来

---

**项目状态**: ✅ 可运行
**最后更新**: 2024-08-26
**作者**: Momentum Lens Team