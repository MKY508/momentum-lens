# Momentum Lens - Aè‚¡ETFåŠ¨é‡å†³ç­–ç³»ç»Ÿ

[![Python](https://img.shields.io/badge/Python-3.11+-blue)](https://www.python.org/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.48+-red)](https://streamlit.io/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

## ğŸ“Š é¡¹ç›®ç®€ä»‹

Momentum Lens æ˜¯ä¸€å¥—å®Œæ•´çš„ Aè‚¡ ETF åŠ¨é‡æŠ•èµ„å†³ç­–ç³»ç»Ÿï¼Œé›†æˆäº†æ•°æ®æŠ“å–ã€æŒ‡æ ‡è®¡ç®—ã€ç­–ç•¥å¼•æ“ã€å›æµ‹è¯„ä¼°å’Œå¯è§†åŒ–å†³ç­–å°ã€‚ç³»ç»Ÿé‡‡ç”¨ Core/Satellite é…ç½®ç­–ç•¥ï¼Œç»“åˆå¯è½¬å€ºç½‘æ ¼äº¤æ˜“ï¼Œæä¾›åŠè‡ªåŠ¨åŒ–çš„æŠ•èµ„å†³ç­–æ”¯æŒã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **åŠ¨é‡ç­–ç•¥å¼•æ“**ï¼šåŸºäºåŒçª—å£ï¼ˆ3ä¸ªæœˆ/6ä¸ªæœˆï¼‰åŠ¨é‡å› å­çš„ETFé€‰æ‹©
- **æ™ºèƒ½çŠ¶æ€æœº**ï¼šæ ¹æ®å¸‚åœºç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢è¿›æ”»/ä¸­æ€§/é˜²å®ˆæ¨¡å¼
- **Core/Satelliteé…ç½®**ï¼šåŠ¨æ€è°ƒæ•´æ ¸å¿ƒèµ„äº§ä¸å«æ˜Ÿèµ„äº§æ¯”ä¾‹
- **å¯è½¬å€ºç½‘æ ¼äº¤æ˜“**ï¼šå¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿç­›é€‰å¯è½¬å€ºï¼Œè‡ªåŠ¨è®¡ç®—ç½‘æ ¼å‚æ•°
- **æ•°æ®æºé™çº§æœºåˆ¶**ï¼šAkShare â†’ æ–°æµªè´¢ç» â†’ ä¸œæ–¹è´¢å¯Œï¼Œç¡®ä¿ç³»ç»Ÿé«˜å¯ç”¨
- **å®æ—¶å¯è§†åŒ–ç•Œé¢**ï¼šåŸºäºStreamlitçš„Webå†³ç­–å°
- **ä¸€é”®å¯¼å‡ºåŠŸèƒ½**ï¼šç”Ÿæˆå‘¨äºŒä¸‹å•æ¸…å•ï¼ˆCSV/PDFï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- pip æˆ– conda
- Git

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/yourusername/momentum-lens.git
cd momentum-lens/projecttest3
```

2. **å®‰è£…ä¾èµ–**
```bash
# ä½¿ç”¨setupè„šæœ¬ï¼ˆæ¨èï¼‰
./setup.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3. **å¯åŠ¨åº”ç”¨**
```bash
# ä½¿ç”¨Makefile
make app

# æˆ–ç›´æ¥è¿è¡Œ
streamlit run backend/app_enhanced.py
```

4. **è®¿é—®ç•Œé¢**
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8502

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
momentum-lens/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ adapters/          # æ•°æ®æºé€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ base.py        # æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ akshare_adapter.py
â”‚   â”‚   â”œâ”€â”€ sina_adapter.py
â”‚   â”‚   â””â”€â”€ eastmoney_adapter.py
â”‚   â”œâ”€â”€ indicators/        # æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ technical.py  # MA, ATR, RSIç­‰
â”‚   â”‚   â”œâ”€â”€ market_env.py # å¸‚åœºç¯å¢ƒåˆ†æ
â”‚   â”‚   â”œâ”€â”€ momentum.py   # åŠ¨é‡è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ correlation.py # ç›¸å…³æ€§åˆ†æ
â”‚   â”‚   â””â”€â”€ convertible.py # å¯è½¬å€ºè¯„åˆ†
â”‚   â”œâ”€â”€ engine/           # ç­–ç•¥å¼•æ“
â”‚   â”‚   â”œâ”€â”€ state_machine.py # ä¸‰æ€çŠ¶æ€æœº
â”‚   â”‚   â”œâ”€â”€ strategy.py   # åŠ¨é‡ç­–ç•¥
â”‚   â”‚   â””â”€â”€ rotation.py   # è½®åŠ¨ç®¡ç†
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ convertible_bonds.py # å¯è½¬å€ºæ•°æ®
â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config.yaml   # ä¸»é…ç½®
â”‚   â”‚   â””â”€â”€ etf_universe.yaml # ETFæ± 
â”‚   â””â”€â”€ app_enhanced.py   # Streamlitåº”ç”¨
â”œâ”€â”€ tests/                # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ docker/              # Dockeré…ç½®
â”œâ”€â”€ exports/             # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ logs/                # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ requirements.txt     # ä¾èµ–åŒ…
```

## ğŸ”§ æ ¸å¿ƒç®—æ³•

### åŠ¨é‡è¯„åˆ†å…¬å¼
```python
Score = 0.6 * rank(r63) + 0.4 * rank(r126) + Bonus_div - Penalty
```
- r63: 3ä¸ªæœˆæ”¶ç›Šç‡
- r126: 6ä¸ªæœˆæ”¶ç›Šç‡
- Bonus_div: å¤šæ ·æ€§åŠ åˆ†ï¼ˆä½ç›¸å…³æ€§ï¼‰
- Penalty: è´¹ç‡å’Œæº¢ä»·æ‰£åˆ†

### CHOPéœ‡è¡æŒ‡æ ‡
```python
CHOP = 100 * log10(sum(TR,N) / (High(N)-Low(N))) / log10(N)
```
- N=30å¤©
- CHOP â‰¥ 61 è§†ä¸ºéœ‡è¡å¸‚

### å¯è½¬å€ºç½‘æ ¼æ­¥é•¿
```python
g = clamp(2% + 1.5*(ATR10/close - 2%), 2%, 5%)
```

## ğŸ“ˆ ç­–ç•¥è¯´æ˜

### å¸‚åœºçŠ¶æ€æœº

| çŠ¶æ€ | æ¡ä»¶ | Coreæ¯”ä¾‹ | Satelliteæ¯”ä¾‹ | æŒä»“æ•° |
|------|------|----------|--------------|--------|
| OFFENSE | MA200ä¸Šæ–¹ã€ä½CHOPã€ä½æ³¢åŠ¨ | 30% | 70% | 4 |
| NEUTRAL | ä¸­æ€§å¸‚åœºç¯å¢ƒ | 50% | 50% | 3 |
| DEFENSE | MA200ä¸‹æ–¹æˆ–é«˜å›æ’¤ | 70% | 30% | 2 |

### ä¸¤æ¡è…¿ç­–ç•¥
- é€‰æ‹©åŠ¨é‡å¾—åˆ†æœ€é«˜çš„ä¸¤ä¸ªETF
- ç›¸å…³æ€§çº¦æŸï¼šÏ â‰¤ 0.7
- æœ€çŸ­æŒæœ‰æœŸï¼š2å‘¨ï¼ˆéœ‡è¡å¸‚4å‘¨ï¼‰
- æ­¢æŸçº¿ï¼š-10%ï¼ˆè¿›æ”»ï¼‰/-12%ï¼ˆä¸­æ€§ï¼‰/-15%ï¼ˆé˜²å®ˆï¼‰

## ğŸ“Š ETFå€™é€‰æ± 

ç³»ç»ŸåŒ…å«80+ä¸ªETFï¼Œè¦†ç›–ä»¥ä¸‹ç±»åˆ«ï¼š
- ğŸ® æ¸¸æˆåŠ¨æ¼«æ–‡å¨±
- ğŸ’» ç§‘æŠ€åˆ›æ–°
- âš¡ æ–°èƒ½æºäº§ä¸šé“¾
- ğŸ›ï¸ æ¶ˆè´¹è¡Œä¸š
- ğŸ’Š åŒ»è¯å¥åº·
- ğŸ¦ é‡‘èåœ°äº§
- ğŸ­ å‘¨æœŸèµ„æº
- ğŸ›¡ï¸ å†›å·¥å®‰é˜²
- ğŸ—ï¸ åŸºå»ºå‡ºå£

## ğŸ”„ å¯è½¬å€ºè¯„åˆ†ä½“ç³»

| ç»´åº¦ | æƒé‡ | è¯´æ˜ |
|------|------|------|
| æº¢ä»·ç‡ | 25% | è´Ÿæº¢ä»·å¾—é«˜åˆ† |
| åŒä½å€¼ | 20% | ä»·æ ¼+æº¢ä»·ç‡è¶Šä½è¶Šå¥½ |
| ä¿¡ç”¨è¯„çº§ | 15% | AAAåˆ°A-åˆ†çº§ |
| è§„æ¨¡ | 10% | 10-50äº¿æœ€ä¼˜ |
| YTM | 10% | 2-4%æœ€ä¼˜ |
| æµåŠ¨æ€§ | 10% | æˆäº¤é‡è¶Šå¤§è¶Šå¥½ |
| PBæ¯”ç‡ | 10% | 0.8-1.5æœ€ä¼˜ |

## ğŸ› ï¸ å‘½ä»¤è¯´æ˜

```bash
# å¼€å‘å‘½ä»¤
make setup      # åˆå§‹åŒ–ç¯å¢ƒ
make app        # å¯åŠ¨åº”ç”¨
make test       # è¿è¡Œæµ‹è¯•
make backtest   # è¿è¡Œå›æµ‹
make export     # å¯¼å‡ºæ¸…å•

# Dockeréƒ¨ç½²
make docker-build  # æ„å»ºé•œåƒ
make docker-up     # å¯åŠ¨å®¹å™¨
make docker-down   # åœæ­¢å®¹å™¨
```

## ğŸ“± ç•Œé¢åŠŸèƒ½

1. **ç¯å¢ƒç¯**ï¼šå®æ—¶æ˜¾ç¤ºå¸‚åœºçŠ¶æ€ï¼ˆè¿›æ”»ğŸŸ¢/ä¸­æ€§ğŸŸ¡/é˜²å®ˆğŸ”´ï¼‰
2. **åŠ¨é‡æ’å**ï¼šTop 20 ETFåŠ¨é‡æ’åï¼Œå«ç›¸å…³æ€§åˆ†æ
3. **æ¨èç»„åˆ**ï¼šæ™ºèƒ½æ¨èä¸¤æ¡è…¿é…ç½®ï¼Œæ˜¾ç¤ºé€‰æ‹©ç†ç”±
4. **å¯è½¬å€ºç½‘æ ¼**ï¼š50+å¯è½¬å€ºç­›é€‰è¯„åˆ†ï¼Œç½‘æ ¼å‚æ•°è®¡ç®—
5. **å›æµ‹åˆ†æ**ï¼š2020-2025å®Œæ•´å›æµ‹ï¼Œæœˆåº¦æ”¶ç›Šçƒ­åŠ›å›¾
6. **å¯¼å‡ºæ¸…å•**ï¼šä¸€é”®ç”Ÿæˆå‘¨äºŒä¸‹å•æ¸…å•

## ğŸ”’ é£é™©æç¤º

- æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®
- å†å²ä¸šç»©ä¸ä»£è¡¨æœªæ¥è¡¨ç°
- æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“§ è”ç³»æ–¹å¼

- ä½œè€…ï¼š[Your Name]
- Emailï¼š[your.email@example.com]
- é¡¹ç›®é“¾æ¥ï¼š[https://github.com/yourusername/momentum-lens](https://github.com/yourusername/momentum-lens)

## ğŸ™ è‡´è°¢

- [AkShare](https://github.com/akfamily/akshare) - Aè‚¡æ•°æ®æ¥å£
- [Streamlit](https://streamlit.io/) - Webåº”ç”¨æ¡†æ¶
- [Backtrader](https://www.backtrader.com/) - å›æµ‹å¼•æ“

---
â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼